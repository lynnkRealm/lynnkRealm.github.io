<!DOCTYPE html>
    <html>
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=g68mo7vlzd"></script>
      <style>html, body, #map { margin:0; padding:0; width:100%; height:100%; }</style>
    </head>
    <body>
      <div id="map"></div>
      <script>
        var map = new naver.maps.Map('map', { center: new naver.maps.LatLng(37.5665, 126.9780), zoom: 13 });
        var marker = null;

        function searchPlace(keyword) {
          if (marker) marker.setMap(null);
          naver.maps.Service.geocode({ query: keyword }, function(status, response) {
            if (status !== naver.maps.Service.Status.OK) {
              alert('검색 실패');
              return;
            }
            var item = response.v2.addresses[0];
            var position = new naver.maps.LatLng(item.y, item.x);
            marker = new naver.maps.Marker({ position: position, map: map });
            map.setCenter(position);
            naver.maps.Event.addListener(marker, 'click', function() {
              window.ReactNativeWebView.postMessage(JSON.stringify({ type: 'selectPlace', data: { lat: position.lat(), lng: position.lng() } }));
            });
          });
        }

        window.ReactNativeWebView.onMessage = function(data) {
          try {
            var message = JSON.parse(data);
            if (message.type === 'searchPlace') {
              searchPlace(message.data.keyword);
            }
          } catch (e) {
            console.error(e);
          }
        };
      </script>
    </body>
    </html>
